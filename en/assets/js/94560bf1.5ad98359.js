"use strict";(globalThis.webpackChunkblog_v1=globalThis.webpackChunkblog_v1||[]).push([[348],{2508(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>o,toc:()=>l});var o=t(9547),s=t(4848),r=t(8453);const i={slug:"react-hooks-guide",title:"Complete Guide to React Hooks",authors:["admin"],tags:["react","frontend","javascript","tutorial"],date:"2025-02-01T09:00",description:"A comprehensive guide to understanding and using React Hooks"},c=void 0,a={authorsImageUrls:[void 0]},l=[{value:"Why Hooks?",id:"why-hooks",level:2},{value:"Common Hooks",id:"common-hooks",level:2},{value:"1. useState - State Management",id:"1-usestate---state-management",level:3},{value:"2. useEffect - Side Effects",id:"2-useeffect---side-effects",level:3},{value:"3. useContext - Context Management",id:"3-usecontext---context-management",level:3},{value:"4. useReducer - Complex State Management",id:"4-usereducer---complex-state-management",level:3},{value:"5. useMemo and useCallback - Performance Optimization",id:"5-usememo-and-usecallback---performance-optimization",level:3},{value:"6. useRef - References and DOM Access",id:"6-useref---references-and-dom-access",level:3},{value:"Custom Hooks",id:"custom-hooks",level:2},{value:"Hooks Rules",id:"hooks-rules",level:2},{value:"Rule 1: Only Call Hooks at the Top Level",id:"rule-1-only-call-hooks-at-the-top-level",level:3},{value:"Rule 2: Only Call Hooks from React Functions",id:"rule-2-only-call-hooks-from-react-functions",level:3},{value:"Performance Optimization Tips",id:"performance-optimization-tips",level:2},{value:"1. Avoid Unnecessary Re-renders",id:"1-avoid-unnecessary-re-renders",level:3},{value:"2. Use Dependency Arrays Properly",id:"2-use-dependency-arrays-properly",level:3},{value:"Summary",id:"summary",level:2},{value:"References",id:"references",level:2}];function u(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"React Hooks, introduced in React 16.8, allow you to use state and other React features without writing a class."}),"\n",(0,s.jsx)(n.h2,{id:"why-hooks",children:"Why Hooks?"}),"\n",(0,s.jsx)(n.p,{children:"Before Hooks, React components were mainly divided into two types:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Class components"}),": Could use state and lifecycle methods"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Function components"}),': Could only receive props, called "stateless components"']}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Hooks solve the following problems:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Difficulty reusing stateful logic between components"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Complex components are hard to understand"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsxs)(n.strong,{children:["The ",(0,s.jsx)(n.code,{children:"this"})," keyword problem in class components"]})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"common-hooks",children:"Common Hooks"}),"\n",(0,s.jsx)(n.h3,{id:"1-usestate---state-management",children:"1. useState - State Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import React, { useState } from 'react';\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>Current count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>\n        Increment\n      </button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Best Practice:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Use functional updates\nsetCount(prevCount => prevCount + 1);\n\n// \u274c Avoid using current value directly\nsetCount(count + 1);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-useeffect---side-effects",children:"2. useEffect - Side Effects"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import React, { useState, useEffect } from 'react';\n\nfunction UserProfile({ userId }: { userId: number }) {\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // Data fetching\n    async function fetchUser() {\n      setLoading(true);\n      try {\n        const response = await fetch(`/api/users/${userId}`);\n        const data = await response.json();\n        setUser(data);\n      } catch (error) {\n        console.error('Failed to fetch user:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    fetchUser();\n\n    // Cleanup function\n    return () => {\n      // Cancel requests or cleanup subscriptions\n    };\n  }, [userId]); // Dependency array\n\n  if (loading) return <div>Loading...</div>;\n  if (!user) return <div>User not found</div>;\n\n  return <div>Username: {user.name}</div>;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-usecontext---context-management",children:"3. useContext - Context Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import React, { createContext, useContext, useState } from 'react';\n\n// Create context\ninterface ThemeContextType {\n  theme: 'light' | 'dark';\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\n// Provider component\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<'light' | 'dark'>('light');\n\n  const toggleTheme = () => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\n// Custom Hook\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within ThemeProvider');\n  }\n  return context;\n}\n\n// Usage\nfunction ThemedButton() {\n  const { theme, toggleTheme } = useTheme();\n  \n  return (\n    <button \n      onClick={toggleTheme}\n      style={{ \n        background: theme === 'light' ? '#fff' : '#333',\n        color: theme === 'light' ? '#333' : '#fff'\n      }}\n    >\n      Toggle Theme\n    </button>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-usereducer---complex-state-management",children:"4. useReducer - Complex State Management"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import React, { useReducer } from 'react';\n\n// Define state type\ninterface State {\n  count: number;\n  step: number;\n}\n\n// Define action type\ntype Action = \n  | { type: 'increment' }\n  | { type: 'decrement' }\n  | { type: 'setStep'; payload: number }\n  | { type: 'reset' };\n\n// Reducer function\nfunction counterReducer(state: State, action: Action): State {\n  switch (action.type) {\n    case 'increment':\n      return { ...state, count: state.count + state.step };\n    case 'decrement':\n      return { ...state, count: state.count - state.step };\n    case 'setStep':\n      return { ...state, step: action.payload };\n    case 'reset':\n      return { count: 0, step: 1 };\n    default:\n      return state;\n  }\n}\n\nfunction Counter() {\n  const [state, dispatch] = useReducer(counterReducer, { count: 0, step: 1 });\n\n  return (\n    <div>\n      <p>Count: {state.count}</p>\n      <p>Step: {state.step}</p>\n      <button onClick={() => dispatch({ type: 'increment' })}>+</button>\n      <button onClick={() => dispatch({ type: 'decrement' })}>-</button>\n      <input\n        type=\"number\"\n        value={state.step}\n        onChange={(e) => dispatch({ \n          type: 'setStep', \n          payload: Number(e.target.value) \n        })}\n      />\n      <button onClick={() => dispatch({ type: 'reset' })}>Reset</button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-usememo-and-usecallback---performance-optimization",children:"5. useMemo and useCallback - Performance Optimization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import React, { useState, useMemo, useCallback } from 'react';\n\nfunction ExpensiveComponent() {\n  const [count, setCount] = useState(0);\n  const [items, setItems] = useState<number[]>([]);\n\n  // useMemo: Cache computed results\n  const expensiveValue = useMemo(() => {\n    console.log('Computing expensive value...');\n    return items.reduce((sum, item) => sum + item, 0);\n  }, [items]); // Only recompute when items change\n\n  // useCallback: Cache function\n  const handleAddItem = useCallback(() => {\n    setItems(prev => [...prev, Math.random()]);\n  }, []); // Function never changes\n\n  return (\n    <div>\n      <p>Sum: {expensiveValue}</p>\n      <p>Click count: {count}</p>\n      <button onClick={() => setCount(c => c + 1)}>Increment Count</button>\n      <button onClick={handleAddItem}>Add Item</button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"6-useref---references-and-dom-access",children:"6. useRef - References and DOM Access"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import React, { useRef, useEffect } from 'react';\n\nfunction TextInputWithFocus() {\n  const inputRef = useRef<HTMLInputElement>(null);\n  const renderCount = useRef(0);\n\n  useEffect(() => {\n    // Auto-focus on mount\n    inputRef.current?.focus();\n    \n    // Track render count (doesn't trigger re-render)\n    renderCount.current += 1;\n  });\n\n  return (\n    <div>\n      <input ref={inputRef} type=\"text\" />\n      <p>Render count: {renderCount.current}</p>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"custom-hooks",children:"Custom Hooks"}),"\n",(0,s.jsx)(n.p,{children:"Custom Hooks let you extract component logic into reusable functions:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { useState, useEffect } from 'react';\n\n// Custom Hook: Window size\nfunction useWindowSize() {\n  const [size, setSize] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useEffect(() => {\n    const handleResize = () => {\n      setSize({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  return size;\n}\n\n// Usage\nfunction ResponsiveComponent() {\n  const { width, height } = useWindowSize();\n\n  return (\n    <div>\n      Window size: {width} x {height}\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Custom Hook: Local storage\nfunction useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      console.error(error);\n      return initialValue;\n    }\n  });\n\n  const setValue = (value: T | ((val: T) => T)) => {\n    try {\n      const valueToStore = value instanceof Function ? value(storedValue) : value;\n      setStoredValue(valueToStore);\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return [storedValue, setValue] as const;\n}\n\n// Usage\nfunction App() {\n  const [name, setName] = useLocalStorage('name', 'Guest');\n\n  return (\n    <input\n      value={name}\n      onChange={(e) => setName(e.target.value)}\n    />\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"hooks-rules",children:"Hooks Rules"}),"\n",(0,s.jsx)(n.h3,{id:"rule-1-only-call-hooks-at-the-top-level",children:"Rule 1: Only Call Hooks at the Top Level"}),"\n",(0,s.jsxs)(n.p,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"Wrong:"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function BadComponent() {\n  if (condition) {\n    const [count, setCount] = useState(0); // \u274c Don't use in conditions\n  }\n  \n  for (let i = 0; i < 10; i++) {\n    useEffect(() => {}); // \u274c Don't use in loops\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Correct:"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function GoodComponent() {\n  const [count, setCount] = useState(0);\n  \n  useEffect(() => {\n    if (condition) {\n      // Conditional logic inside Hook\n    }\n  });\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"rule-2-only-call-hooks-from-react-functions",children:"Rule 2: Only Call Hooks from React Functions"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 Call from React function components"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 Call from custom Hooks"}),"\n",(0,s.jsx)(n.li,{children:"\u274c Don't call from regular JavaScript functions"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"performance-optimization-tips",children:"Performance Optimization Tips"}),"\n",(0,s.jsx)(n.h3,{id:"1-avoid-unnecessary-re-renders",children:"1. Avoid Unnecessary Re-renders"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import React, { memo } from 'react';\n\n// Use React.memo to wrap component\nconst ExpensiveChild = memo(function ExpensiveChild({ data }: { data: string }) {\n  console.log('ExpensiveChild rendered');\n  return <div>{data}</div>;\n});\n\nfunction Parent() {\n  const [count, setCount] = useState(0);\n  const data = useMemo(() => 'static data', []); // Cache props\n\n  return (\n    <div>\n      <button onClick={() => setCount(c => c + 1)}>Count: {count}</button>\n      <ExpensiveChild data={data} />\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-use-dependency-arrays-properly",children:"2. Use Dependency Arrays Properly"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u274c Missing dependencies\nuseEffect(() => {\n  console.log(count);\n}, []); // count changes won't trigger re-execution\n\n// \u2705 Correct dependencies\nuseEffect(() => {\n  console.log(count);\n}, [count]);\n\n// \u2705 Empty dependency array (only run on mount)\nuseEffect(() => {\n  console.log('Component mounted');\n}, []);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,s.jsx)(n.p,{children:"Core advantages of React Hooks:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cleaner code"})," - No need for class components"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Better logic reuse"})," - Through custom Hooks"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Clearer side effect management"})," - useEffect"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"Better TypeScript support"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Remember the two rules of Hooks and use dependency arrays properly, and you'll unlock the full power of Hooks!"}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://react.dev/reference/react",children:"React Hooks Official Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://usehooks.com/",children:"useHooks - Custom Hooks Collection"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://react-typescript-cheatsheet.netlify.app/",children:"React TypeScript Cheatsheet"})}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},8453(e,n,t){t.d(n,{R:()=>i,x:()=>c});var o=t(6540);const s={},r=o.createContext(s);function i(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),o.createElement(r.Provider,{value:n},e.children)}},9547(e){e.exports=JSON.parse('{"permalink":"/en/react-hooks-guide","editUrl":"https://github.com/pfyangf/pfyangf.github.io/tree/main/blog/2025/02-01-react-hooks-guide.md","source":"@site/i18n/en/docusaurus-plugin-content-blog/2025/02-01-react-hooks-guide.md","title":"Complete Guide to React Hooks","description":"A comprehensive guide to understanding and using React Hooks","date":"2025-02-01T09:00:00.000Z","tags":[{"inline":false,"label":"React","permalink":"/en/tags/react","description":"React \u6846\u67b6\u76f8\u5173"},{"inline":false,"label":"\u524d\u7aef\u5f00\u53d1","permalink":"/en/tags/frontend","description":"\u524d\u7aef\u5f00\u53d1\u76f8\u5173\u6280\u672f\u6587\u7ae0"},{"inline":false,"label":"JavaScript","permalink":"/en/tags/javascript","description":"JavaScript \u7f16\u7a0b\u8bed\u8a00"},{"inline":false,"label":"\u6559\u7a0b","permalink":"/en/tags/tutorial","description":"\u6280\u672f\u6559\u7a0b\u548c\u6307\u5357"}],"readingTime":4.93,"hasTruncateMarker":true,"authors":[{"name":"\u7ba1\u7406\u5458","title":"\u5168\u6808\u5de5\u7a0b\u5e08","url":"https://github.com/yourusername","email":"admin@example.com","page":{"permalink":"/en/authors/admin"},"socials":{"github":"https://github.com/yourusername","twitter":"https://twitter.com/yourhandle"},"imageURL":"https://github.com/yourusername.png","key":"admin"}],"frontMatter":{"slug":"react-hooks-guide","title":"Complete Guide to React Hooks","authors":["admin"],"tags":["react","frontend","javascript","tutorial"],"date":"2025-02-01T09:00","description":"A comprehensive guide to understanding and using React Hooks"},"unlisted":false,"nextItem":{"title":"TypeScript Best Practices Guide","permalink":"/en/typescript-best-practices"}}')}}]);